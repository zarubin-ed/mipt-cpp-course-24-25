# CowString

**CowString** – класс для работы со строковыми данными, аналогичный `std::string` с поддержкой оптимизации Copy-on-Write, то есть при присвоении или при вызове копирующего оператора присваивания, строка не копируется, а начинает указывать на тот же буфер, что и исходная строка, строка копируется лишь тогда, когда строка изменяется. Управление динамической памятью осуществляется вручную без использования стандартных контейнеров. 
---

## Конструкторы

- `CowString(const char* cStyleString)` - конструктор от cstring
- конструткор от символа `CowString(char symbol)` (создает строку из одного символа) и от числа и количества вимволов `CowString(size_t length, char symbol)` (создает строку из length копий символа).
- конструктор копирования `СowString(const CowString& other)`

---

## Деструктор

- `~CowString()` - последняя строка в семействе удаляет буфер.
---

## Методы доступа к данным

### size и length
Возращают количество символов в строке (без учета `'\0'`).

### capacity
Возвращает ёмкость буфера (без учета служебной информации).

### empty
Возвращает `true`, если строка пуста, иначе `false`.

---

## Методы доступа к элементам

### data
`char* data() (const char* data() const)` - возращает указатель массив char* соответствущей константности, оканичивающийся `'\0'`, состоящий из элементов строки. Неконстантный метод делает копию строки, если буфер разделяет несколькр строк.

### operator []
Возращает `i`-й элемент строки соответствущей константности. При вызове от неконстрантной строки делает копию, если буфер разделяет несколько строк.

### front и back 
Идентичны `operator[](0)` и `operator[](size() - 1)` соответственно.

## Методы модификации строки

### push_back(symbol)
Добавляет символ `symbol` в конец строки, если `capacity() == size()`, увеличивает catacity в `2` раза. Вызывает копирование строки, если буфер разделяет несколько строк.

### void pop_back()
Удаляет последний символ строки. Вызывает копирование строки, если буфер разделяет несколько строк.

### void clear()
Очищает строку, устанавливая длину равной `0`. Вызывает копирование строки, если буфер разделяет несколько строк.

### void shrink_to_fit()
Если ёмкость превышает длину строки (с учетом служебной информации), вызывает `reallocate()` для уменьшения объема выделенной памяти.

### CowString& operator+=(char symbol)
Добавляет символ к строке, делегируя вызов методу `push_back()`.

### CowString& operator+=(const CowString& other)
Конкатенирует строку `other` в конец текущей строки. Копирует данные с использованием `std::copy`. Вызывает копирование строки, если буфер разделяет несколько строк.

### void swap(CowString& other)
Обменивает данные текущего объекта с объектом `other` с использованием `std::swap`.

### CowString substr(size_t start, size_t length) const
Возвращает подстроку, начиная с позиции `start` и содержащую не более `length` символов.

### CowString& operator=(const CowString& other)

---

## Операторы

Оператор сравнения `<=>` сравнивает строки лексикографически.

### operator>>(std::istream& inStream, CowString& other)
Вводит строку до первого пробельного символа.

### operator<<(std::ostream& outStream, const CowString& str)
Выводит строку в поток.

---