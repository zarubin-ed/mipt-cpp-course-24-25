# BigInteger & Rational Library (`biginteger.h`)

Класс для работы с целыми числами произвольной длины и класс для рациональных чисел на их основе.

---

## Содержание

1. [BigInteger](#biginteger)
2. [Rational](#rational)
3. [Особенности реализации](#features)

---

## BigInteger

**Суть:**
Представляет целое число произвольной длины со знаком. Поддерживает все базовые арифметические операции, сравнение, ввод-вывод и эффективное умножение через FFT.

**Файл:** `biginteger.h`  
**Компиляция:** Clang 17.0.1, C++20, подключается через `#include "biginteger.h"`.

### Конструкторы

- `BigInteger()` — значение 0.
- `BigInteger(int64_t number)` — из 64‑битного целого.
- `BigInteger(const std::string &str)` — из десятичной строки с опциональным `+`/`-`.
- `BigInteger(const char* str, size_t size)` — аналогично.

### Преобразования

- `std::string toString() const` — десятичная форма, без ведущих нулей.
- `explicit operator bool() const` — `false` для 0, иначе `true`.

### User-defined literal

Литерал `_bi` позволяет напрямую создавать BigInteger из целочисленных констант и строк:
```cpp
BigInteger a = 12345678901234567890_bi;
BigInteger b = "3141592653589793"_bi;
```
### Арифметика

| Оператор                   | Описание               | Сложность                                                    |
| -------------------------- | ---------------------- | ------------------------------------------------------------ |
| `+,-,*,/, %`               | бинарные операции      | +,-: O(n), \*: O(n log n) или O(n²) для коротких, /,%: O(n²) |
| `+=,-=,*=,/=,%=`           | составное присваивание | аналогично                                                   |
| `-` (унарный)              | смена знака            | O(1)                                                         |
| `++/--` (префикс/постфикс) | инкремент/декремент    | префикс: O(1) в среднем, постфикс: O(n) (копирование)        |

**FFT-умножение:**
Для используется умножение через Быстрое Преобразование Фурье (FFT), дающее сложность O(n log n).

### Сравнение

* `operator<=>` (spaceship) для порядка (`std::weak_ordering`).
* `operator==` проверяет равенство знака и цифр, O(1) при разных длинах.

### Ввод/вывод

* `friend std::ostream& operator<<(ostream&, const BigInteger&)`
* `friend std::istream& operator>>(istream&, BigInteger& )`

---

## Rational

**Суть:**
Рациональное число как несократимая дробь $rac{p}{q}$, где `p,q` — BigInteger.

### Конструкторы

* `Rational()` — 0/1.
* `Rational(const BigInteger &num)` — `num/1`.
* `Rational(int num)` — `num/1`.
* `Rational(const BigInteger &num, const BigInteger &den)` — нормализуется автоматически.

### Методы

* `std::string toString() const` — `"p/q"`, если q≠1; иначе `"p"`.
* `std::string asDecimal(size_t precision=0) const` — десятичное представление с `precision` цифрами после запятой.
* `explicit operator double()` — через `asDecimal(6)` и `std::stod`.

### Арифметика

| Оператор      | Описание               |
| ------------- | ---------------------- |
| `+,-,*,/`     | бинарные операции      |
| `+=,-=,*=,/=` | составное присваивание |
| unary `-`     | смена знака            |

### Сравнение

* `operator<=>` и `operator==` через BigInteger-кросс-умножение: $p1/q1 <=> p2/q2$.

---

## Особенности реализации {#features}

* **База**: каждое звено `digits_` хранит до 10^5 (kBase=1e5) в `deque<int64_t>`.
* **Нормализация** удаляет ведущие нули.
* **FFT-мультипликация**: для больших размеров (длина > 10000) использована классическая Cooley–Tuk алгоритм (O(n log n)).
* **Деление**: школьное «сдвиговое» деление за O(n²).
* **GCD** для Rational: алгоритм Евклида с остатком.

---

*Файл:* `biginteger.h`
*Компиляция:* `Make` + Clang 17.0.1 C++20
